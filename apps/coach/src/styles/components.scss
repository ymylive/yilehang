// ============================================
// 易乐航设计系统 - 通用组件样式
// ============================================

@import './variables.scss';

// ============ 卡片组件 ============

.card {
  background: $bg-card;
  border-radius: $radius-md;
  box-shadow: $shadow-md;
  padding: $spacing-md;
}

.card-sm {
  padding: $spacing-sm;
  border-radius: $radius-sm;
  box-shadow: $shadow-sm;
}

.card-lg {
  padding: $spacing-lg;
  border-radius: $radius-lg;
  box-shadow: $shadow-md;
}

.card-flat {
  box-shadow: none;
  border: 2rpx solid $border-color;
}

.card-clickable {
  transition: all $transition-normal ease;

  &:active {
    transform: scale(0.99);
    box-shadow: $shadow-sm;
  }
}

// ============ 按钮组件 ============

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: $radius-full;
  padding: 20rpx 40rpx;
  font-size: $font-md;
  font-weight: $font-semibold;
  transition: all $transition-normal ease;

  &:active {
    transform: scale(0.98);
    opacity: 0.9;
  }

  &[disabled],
  &.disabled {
    opacity: 0.5;
    pointer-events: none;
  }
}

.btn-primary {
  background: $primary-gradient;
  color: $text-white;
  box-shadow: $shadow-primary;

  &:active {
    box-shadow: 0 6rpx 16rpx rgba(255, 136, 0, 0.3);
  }
}

.btn-secondary {
  background: $bg-card;
  color: $text-primary;
  box-shadow: $shadow-sm;
}

.btn-ghost {
  background: rgba(255, 136, 0, 0.1);
  color: $primary;
}

.btn-outline {
  background: transparent;
  color: $primary;
  border: 2rpx solid $primary;
}

.btn-text {
  background: transparent;
  color: $primary;
  padding: 12rpx 24rpx;
}

.btn-sm {
  padding: 12rpx 24rpx;
  font-size: $font-sm;
}

.btn-lg {
  padding: 28rpx 56rpx;
  font-size: $font-lg;
}

.btn-block {
  display: flex;
  width: 100%;
}

.btn-icon {
  width: 72rpx;
  height: 72rpx;
  padding: 0;
  border-radius: 50%;
}

// ============ 空状态 ============

.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 80rpx 40rpx;
  text-align: center;

  .empty-icon {
    font-size: 120rpx;
    margin-bottom: 24rpx;
    opacity: 0.6;
  }

  .empty-image {
    width: 200rpx;
    height: 200rpx;
    margin-bottom: 24rpx;
    opacity: 0.8;
  }

  .empty-title {
    font-size: $font-md;
    color: $text-secondary;
    margin-bottom: 8rpx;
  }

  .empty-hint {
    font-size: $font-sm;
    color: $text-hint;
    line-height: 1.5;
  }

  .empty-action {
    margin-top: 32rpx;
  }
}

// ============ 加载状态 ============

.loading-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60rpx;

  .loading-spinner {
    width: 48rpx;
    height: 48rpx;
    border: 4rpx solid $border-color;
    border-top-color: $primary;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }

  .loading-text {
    margin-top: 16rpx;
    font-size: $font-sm;
    color: $text-hint;
  }
}

.loading-inline {
  display: inline-flex;
  align-items: center;
  gap: 8rpx;

  .loading-dot {
    width: 12rpx;
    height: 12rpx;
    background: $primary;
    border-radius: 50%;
    animation: bounce 1s ease-in-out infinite;

    &:nth-child(2) { animation-delay: 0.1s; }
    &:nth-child(3) { animation-delay: 0.2s; }
  }
}

// ============ 标签组件 ============

.tag {
  display: inline-flex;
  align-items: center;
  padding: 6rpx 16rpx;
  font-size: $font-xs;
  border-radius: $radius-full;

  &.tag-primary {
    background: rgba(255, 136, 0, 0.1);
    color: $primary;
  }

  &.tag-success {
    background: rgba(82, 196, 26, 0.1);
    color: $success;
  }

  &.tag-warning {
    background: rgba(250, 173, 20, 0.1);
    color: $warning;
  }

  &.tag-error {
    background: rgba(255, 77, 79, 0.1);
    color: $error;
  }

  &.tag-info {
    background: rgba(24, 144, 255, 0.1);
    color: $info;
  }
}

// ============ 分割线 ============

.divider {
  height: 2rpx;
  background: $divider-color;
  margin: $spacing-md 0;

  &.divider-sm {
    margin: $spacing-sm 0;
  }

  &.divider-lg {
    margin: $spacing-lg 0;
  }
}

.divider-vertical {
  width: 2rpx;
  height: 100%;
  background: $divider-color;
  margin: 0 $spacing-sm;
}

// ============ 列表项 ============

.list-item {
  display: flex;
  align-items: center;
  padding: $spacing-md;
  background: $bg-card;
  transition: background $transition-fast ease;

  &:active {
    background: $bg-input;
  }

  .list-item-icon {
    width: 48rpx;
    height: 48rpx;
    margin-right: $spacing-md;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .list-item-content {
    flex: 1;
    min-width: 0;
  }

  .list-item-title {
    font-size: $font-md;
    color: $text-primary;
  }

  .list-item-desc {
    font-size: $font-sm;
    color: $text-hint;
    margin-top: 4rpx;
  }

  .list-item-extra {
    margin-left: $spacing-sm;
    color: $text-hint;
  }

  .list-item-arrow {
    margin-left: $spacing-sm;
    color: $text-hint;
    font-size: $font-sm;
  }
}

// ============ 头像 ============

.avatar {
  width: 80rpx;
  height: 80rpx;
  border-radius: 50%;
  overflow: hidden;
  background: $bg-disabled;

  image {
    width: 100%;
    height: 100%;
  }

  &.avatar-sm {
    width: 56rpx;
    height: 56rpx;
  }

  &.avatar-lg {
    width: 120rpx;
    height: 120rpx;
  }

  &.avatar-square {
    border-radius: $radius-sm;
  }
}

// ============ 徽章 ============

.badge {
  position: relative;

  .badge-dot {
    position: absolute;
    top: -4rpx;
    right: -4rpx;
    width: 16rpx;
    height: 16rpx;
    background: $error;
    border-radius: 50%;
    border: 2rpx solid $bg-card;
  }

  .badge-count {
    position: absolute;
    top: -10rpx;
    right: -10rpx;
    min-width: 32rpx;
    height: 32rpx;
    padding: 0 8rpx;
    background: $error;
    color: $text-white;
    font-size: $font-xs;
    border-radius: $radius-full;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2rpx solid $bg-card;
  }
}

// ============ 输入框 ============

.input-wrapper {
  display: flex;
  align-items: center;
  background: $bg-input;
  border-radius: $radius-md;
  padding: 0 $spacing-md;
  height: 88rpx;
  transition: all $transition-normal ease;

  &:focus-within {
    background: $bg-card;
    box-shadow: 0 0 0 4rpx rgba(255, 136, 0, 0.1);
  }

  .input-icon {
    margin-right: $spacing-sm;
    color: $text-hint;
  }

  input {
    flex: 1;
    height: 100%;
    font-size: $font-md;
    color: $text-primary;
  }

  .input-clear {
    padding: $spacing-xs;
    color: $text-hint;
  }
}

// ============ 页面容器 ============

.page-container {
  min-height: 100vh;
  background: $bg-page;
  padding-bottom: env(safe-area-inset-bottom);
}

.page-content {
  padding: $spacing-md;
}

.page-header {
  padding: $spacing-lg $spacing-md;
  background: $bg-card;
}

// ============ 安全区域 ============

.safe-bottom {
  padding-bottom: calc(env(safe-area-inset-bottom) + 20rpx);
}

.safe-top {
  padding-top: env(safe-area-inset-top);
}
